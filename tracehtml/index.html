<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tracehtml – Convertir KML/GPX → Carte HTML autonome</title>
    <meta name="description" content="Transformez un fichier KML ou GPX en page HTML autonome avec carte OpenStreetMap et téléchargements GPX/KML/GeoJSON.">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon512.png" sizes="512x512">
    <link rel="apple-touch-icon" href="icon192.png">
    <style>
        body { font-family: system-ui, sans-serif; margin: 2rem; background: #f8f9fa; color: #212529; }
        h1 { color: #007bff; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        input[type=file] { width: 100%; padding: 10px; margin: 1rem 0; }
        button { 
            background: #007bff; color: white; border: none; padding: 12px 24px; 
            font-size: 1.1rem; border-radius: 8px; cursor: pointer;
        }
        button:hover { background: #0056b3; }
        .footer { margin-top: 3rem; text-align: center; font-size: 0.9rem; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <h1>tracehtml</h1>
        <p>Chargez un fichier <strong>.kml</strong> ou <strong>.gpx</strong> pour générer instantanément une page HTML autonome contenant :</p>
        <ul>
            <li>La trace affichée sur une carte OpenStreetMap</li>
            <li>Des boutons pour télécharger la trace en GPX, KML et GeoJSON</li>
        </ul>

        <input type="file" id="file-input" accept=".kml,.gpx" required>
        <br><br>
        <button onclick="generateHtml()">Générer la carte HTML</button>
    </div>

    <div class="footer">
        tracehtml – PWA open-source par Bernard Hoyez – 2025
    </div>

    <script src="app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker enregistré', reg))
                    .catch(err => console.log('Échec SW', err));
            });
        }
    </script>
</body>
</html>